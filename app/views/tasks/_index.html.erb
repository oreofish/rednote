<%# encoding: utf-8 %>

<script>
$(function() {

  // droppable user item in _smallinfo.html.erb
  $( ".useritem" ).droppable({
    activeClass: "ui-state-default",
    hoverClass:  "ui-state-hover",
    tolerance: 'pointer',
    drop: function( event, ui ) {
      $( this ).addClass( "ui-state-highlight" ).find("p").html(ui.draggable.attr("id"));
      console.log('assign task to user');
      $.get("/tasks/assign", {taskid: ui.draggable.attr("id"), userid: $(this).attr("id") }, function (data, textStatus){
        this;
        eval(data);
      });
    }
  });
});
</script>

<h3>待定任务</h3>
<div class="tasklist">
  <% @tasks.each do |task| %>
  <%= render :partial => 'note', :locals => { :task => task, :show => :edit } %>
  <% end %>
</div>
<%= render 'form' %>

<h3>文档</h3>
<div class="answerlist">
  <%= render :partial => 'questions/index', :locals => { :questions => @questions } %>
</div>
